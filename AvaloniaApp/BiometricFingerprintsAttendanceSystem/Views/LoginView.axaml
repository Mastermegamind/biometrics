<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             x:Class="BiometricFingerprintsAttendanceSystem.Views.LoginView">

  <Grid RowDefinitions="Auto,*">

    <!-- ── Top Bar ── -->
    <Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="8,0,8,12">
      <TextBlock Text="BioClock" FontSize="24" FontWeight="Bold"
                 VerticalAlignment="Center"
                 Foreground="{DynamicResource TextPrimaryBrush}" />
      <Button Grid.Column="1"
              Classes="BtnPrimary"
              Content="Admin Login"
              Padding="16,6"
              Command="{Binding OpenLoginCommand}" />
    </Grid>

    <!-- ── Center Actions ── -->
    <StackPanel Grid.Row="1" VerticalAlignment="Center" HorizontalAlignment="Center" Spacing="22">
      <StackPanel Spacing="6" HorizontalAlignment="Center">
        <TextBlock Text="Welcome" Classes="PageTitle" HorizontalAlignment="Center" />
        <TextBlock Text="Choose Clock In or Clock Out to begin"
                   Classes="PageSubtitle" HorizontalAlignment="Center" />
      </StackPanel>

      <UniformGrid Columns="2" Rows="1" HorizontalAlignment="Center">
        <Border Classes="StatCard" Margin="0,0,12,0" Width="260" Height="220">
          <Button Classes="NavBtn" Command="{Binding ClockInCommand}"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  Padding="0">
            <StackPanel Spacing="14" HorizontalAlignment="Center" VerticalAlignment="Center">
              <Border Background="{DynamicResource SuccessLightBrush}" CornerRadius="16"
                      Width="72" Height="72" HorizontalAlignment="Center">
                <TextBlock Text="&#x23F1;" FontSize="32"
                           HorizontalAlignment="Center" VerticalAlignment="Center" />
              </Border>
              <TextBlock Text="Clock In" Classes="CardTitle" HorizontalAlignment="Center" />
              <TextBlock Text="Record your arrival"
                         Classes="PageSubtitle" HorizontalAlignment="Center" />
            </StackPanel>
          </Button>
        </Border>

        <Border Classes="StatCard" Margin="12,0,0,0" Width="260" Height="220">
          <Button Classes="NavBtn" Command="{Binding ClockOutCommand}"
                  HorizontalAlignment="Stretch" VerticalAlignment="Stretch"
                  Padding="0">
            <StackPanel Spacing="14" HorizontalAlignment="Center" VerticalAlignment="Center">
              <Border Background="{DynamicResource PrimaryLightBrush}" CornerRadius="16"
                      Width="72" Height="72" HorizontalAlignment="Center">
                <TextBlock Text="&#x23F3;" FontSize="32"
                           HorizontalAlignment="Center" VerticalAlignment="Center" />
              </Border>
              <TextBlock Text="Clock Out" Classes="CardTitle" HorizontalAlignment="Center" />
              <TextBlock Text="Record your departure"
                         Classes="PageSubtitle" HorizontalAlignment="Center" />
            </StackPanel>
          </Button>
        </Border>
      </UniformGrid>

      <!-- ── Live Monitor ── -->
      <Border Classes="GlassCard" Width="560">
        <StackPanel Spacing="14">
          <StackPanel Orientation="Horizontal" Spacing="10">
            <Border Background="{DynamicResource SecondaryLightBrush}" CornerRadius="12"
                    Width="36" Height="36">
              <TextBlock Text="&#x1F4F6;" FontSize="18"
                         HorizontalAlignment="Center" VerticalAlignment="Center" />
            </Border>
            <StackPanel Spacing="2">
              <TextBlock Text="System Monitor" Classes="SectionHeader" />
              <TextBlock Text="Live connectivity check"
                         Classes="PageSubtitle" />
            </StackPanel>
          </StackPanel>

          <Grid ColumnDefinitions="Auto,*" RowDefinitions="Auto,Auto,Auto,Auto" RowSpacing="8">
            <StackPanel Orientation="Horizontal" Spacing="10">
              <Ellipse Width="10" Height="10" Fill="{Binding ApiStatusBrush}" VerticalAlignment="Center" />
              <TextBlock Text="API" Classes="FieldLabel" VerticalAlignment="Center" />
            </StackPanel>
            <TextBlock Grid.Column="1" Text="{Binding ApiStatus}" Classes="PageSubtitle" />

            <StackPanel Grid.Row="1" Orientation="Horizontal" Spacing="10">
              <Ellipse Width="10" Height="10" Fill="{Binding DbStatusBrush}" VerticalAlignment="Center" />
              <TextBlock Text="Database" Classes="FieldLabel" VerticalAlignment="Center" />
            </StackPanel>
            <TextBlock Grid.Row="1" Grid.Column="1" Text="{Binding DbStatus}" Classes="PageSubtitle" />

            <StackPanel Grid.Row="2" Orientation="Horizontal" Spacing="10">
              <Ellipse Width="10" Height="10" Fill="{Binding FingerprintStatusBrush}" VerticalAlignment="Center" />
              <TextBlock Text="Fingerprint" Classes="FieldLabel" VerticalAlignment="Center" />
            </StackPanel>
            <TextBlock Grid.Row="2" Grid.Column="1" Text="{Binding FingerprintStatus}" Classes="PageSubtitle" />

            <TextBlock Grid.Row="3" Text="Last checked" Classes="FieldLabel" />
            <TextBlock Grid.Row="3" Grid.Column="1" Text="{Binding LastChecked}" Classes="PageSubtitle" />
          </Grid>
        </StackPanel>
      </Border>
    </StackPanel>

    <!-- ── Admin Login Popup ── -->
    <Border IsVisible="{Binding IsAdminLoginOpen}"
            Background="#80000000"
            HorizontalAlignment="Stretch"
            VerticalAlignment="Stretch">
      <Grid>
        <Border Classes="GlassCard" Width="420" BoxShadow="0 12 48 0 #00000050"
                HorizontalAlignment="Center" VerticalAlignment="Center">
          <StackPanel Spacing="18">
            <StackPanel HorizontalAlignment="Center" Spacing="8">
              <TextBlock Text="Admin Login" Classes="PageTitle" HorizontalAlignment="Center" />
              <TextBlock Text="Sign in to access the sidebar"
                         Classes="PageSubtitle" HorizontalAlignment="Center" />
            </StackPanel>

            <Separator Background="{DynamicResource SeparatorBrush}" Height="1" />

            <StackPanel Spacing="12">
              <StackPanel Spacing="4">
                <TextBlock Text="USERNAME" Classes="FieldLabel" />
                <TextBox Classes="GlassInput" Watermark="Enter your username"
                         Text="{Binding Username, Mode=TwoWay}" />
              </StackPanel>

              <StackPanel Spacing="4">
                <TextBlock Text="PASSWORD" Classes="FieldLabel" />
                <TextBox Classes="GlassInput" Watermark="Enter your password"
                         Text="{Binding Password, Mode=TwoWay}" PasswordChar="&#x25CF;" />
              </StackPanel>
            </StackPanel>

            <StackPanel Orientation="Horizontal" Spacing="10" HorizontalAlignment="Right">
              <Button Classes="BtnSecondary" Content="Cancel"
                      Command="{Binding CloseLoginCommand}" />
              <Button Classes="BtnPrimary" Content="Sign In"
                      Command="{Binding LoginCommand}" />
            </StackPanel>

            <TextBlock Text="{Binding StatusMessage}" Classes="ErrorText"
                       HorizontalAlignment="Center"
                       IsVisible="{Binding StatusMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}" />
          </StackPanel>
        </Border>
      </Grid>
    </Border>
  </Grid>
</UserControl>
